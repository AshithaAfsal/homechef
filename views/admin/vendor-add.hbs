<!-- Content
============================================= -->
<section id="content">
    <div class="content-wrap">
        <div class="container">
            <div class="card mb-0 shadow">
                <div class="card-header py-3 ">
                    <h3 class="m-0 font-weight-bold text-theme ">Add vendor Details</h3>
                </div>
                <div class="card-body" style="padding: 40px;">

                    {{#if vendor_message}}
                    <div class="style-msg successmsg" id="success">
                        <div class="sb-msg"><i class="icon-thumbs-up"></i><strong>Well done!</strong> {{vendor_message}}
                        </div>
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
                    </div>

                    {{/if}}

                    <form id="vendor" name="vendor" class="row mb-0" action="/admin/vendor_add" method="post"
                        enctype="multipart/form-data">

                        <div class="col-12 form-group">
                            <label for="ven_name">Name:</label>
                            <input type="text" id="ven_name" name="ven_name" value="{{vendor.ven_name}}"
                                class="form-control" required>

                        </div>
                        <div class="col-12 form-group">
                            <label for="ven_shop_name">Shop Name:</label>
                            <input type="text" id="ven_shop_name" name="ven_shop_name" value="" class="form-control"
                                required>

                        </div>



                        <div class="col-12 form-group">
                            <label for="ven_phone">Phone:</label>
                            <input type="text" title="Enter a vaild Phone Number" id="ven_phone" name="ven_phone"
                                value="" class="form-control" required>

                        </div>

                        <div class="col-12 form-group">
                            <label for="ven_email">Email Address:</label>
                            <input type="text" id="ven_email" name="ven_email" value="" class="form-control" required>
                            <div id="email_error" style="color:red;display:none">
                                <p>Email Already Registered</p>
                            </div>

                            <div id="email_success" style="color:red;display:none">Email Available</div>
                        </div>

                        <div class="col-12 form-group">
                            <label for="ven_password">Choose a Password:</label>
                            <input type="password" name="ven_password" id="ven_password"
                                class="form-control  demoInputBox" onKeyUp="checkPasswordStrength();" required />
                            <div id="password-strength-status" class="text-warning"></div>

                        </div>

                        <div class="col-12 form-group">
                            <label for="confirm_password">Re-enter Password:</label>
                            <input type="password" id="confirm_password" name="confirm_password" value=""
                                class="form-control">

                        </div>

                        <div class="col-12 form-group">
                            <label for="ven_image">Image</label>
                             <img id="imgView" class="pt-3" src=""
                                alt="" style="width:100px;height:auto" /><br>
                            <input type="file" class="" name="ven_image" id="ven_image" placeholder="Image"  required><br>
                               
                              <span id="add_error" class="text-danger"></span>
                        </div>

                        <div class="col-12 form-group mt-2">
                            <button type="submit" class="button button-3d bg-color  m-0" id="ven-submit"
                                name="ven-submit" value="register">Add Vendor</button>
                        </div>

                    </form>
                </div>
            </div>

        </div>

    </div>
</section>



<script>
  
   // Checking email exist or not
    $("#ven_email").keyup(function () {
        var email = $('#ven_email').val();
        if (!email == "") {
            $.ajax({
                type: 'post',
                url: '/admin/vendor_email_check?action=check',
                data: 'ven_email=' + email,

                success: function (response) {
                    if (response.add_failed == "true") {
                        document.getElementById('email_error').style.display = "block";
                        $('#ven_email').val("");
                    }
                    else {
                        document.getElementById('email_error').style.display = "none";
                    }
                }
            })
        }

    });



    // Checking input password strength
    function checkPasswordStrength() {
        var number = /([0-9])/;
        var alphabets = /([a-zA-Z])/;
        var special_characters = /([~,!,@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;
        if ($('#ven_password').val().length < 6) {
            $('#password-strength-status').removeClass();
            $('#password-strength-status').addClass('weak-password');
            $('#password-strength-status').html("Weak (should be atleast 6 characters.)");
        } else {
            if ($('#ven_password').val().match(number) && $('#ven_password').val().match(alphabets) && $('#ven_password').val().match(special_characters)) {
                $('#password-strength-status').removeClass();
                $('#password-strength-status').addClass('strong-password');
                $('#password-strength-status').html("Strong");
            } else {
                $('#password-strength-status').removeClass();
                $('#password-strength-status').addClass('medium-password');
                $('#password-strength-status').html("Medium (should include alphabets, numbers and special characters.)");
            }
        }
    }


    
    
      // Checking uploaded image add section
    $("#ven_image").change(function () {
          
      var file = this.files[0];
      var fileType = file["type"];
      var validImageTypes = ["image/jpg", "image/jpeg", "image/png"];
      if ($.inArray(fileType, validImageTypes) < 0) {        
        $('#add_error').text("Please Select a Valid Image with extension jpg or jpeg or png");
        $("#ven_image").val(null);  
         document.getElementById('imgView').src = "#"
      }
      else{
          document.getElementById('imgView').src = URL.createObjectURL(event.target.files[0])
         $('#add_error').text("");
      }
    });


    
    $(document).ready(function () {        
       // Specify validation rules for vendor 
        $("#vendor").validate({
            
            rules: {
                ven_phone: {

                    digits: true,

                },

                ven_email: {
                    required: true,
                    email: true
                },
                ven_password: {
                    required: true,
                    minlength: 6
                },
                confirm_password: {
                    equalTo: "#ven_password"
                },
                ven_image: {
                    required: true,

                },

            },
            messages: {
                ven_name: {
                    required: "Please enter your name",

                },
                ven_shop_name: {
                    required: "Please enter shop name",

                },
                ven_phone: {
                    required: "Please enter Phone Number",
                    digits: "Please Enter a valid phone number",

                },
                ven_email: {
                    required: "Please enter email address",
                    email: "Please enter a valid email address.",
                },
                ven_password: {
                    required: "Please enter password ",
                    minlength: "Please enter password with minimum 5 characters"

                },
                ven_image: {
                    required: "Please Upload  Image ",

                },
                confirm_password: {
                    equalTo: "Passwords Doesn't Match",

                },
                ven_image: {
                    required: "Please Upload Image",

                },

            },

        });

    });


</script>